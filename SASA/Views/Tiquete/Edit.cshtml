<link rel="stylesheet" href="~/css/ticket.css" asp-append-version="true" />
<div class="card mb-3">
    <div class="card-body">
        <div class="ticket-header mb-4">
            <a  asp-area="" asp-controller="Tiquete" asp-action="Index" class="btn btn-link px-0">
                <i class="bi bi-arrow-left"></i> Volver al listado
            </a>

            <div class="d-flex justify-content-between align-items-center mt-2">
                <h4 class="mb-0 fw-bold">Editar Tiquete TQ-001</h4>
            </div>
        </div>
    </div>
</div>

<div class="card mb-4">
    <div class="card-body">
        <h6 class="section-title mb-3">Información del Tiquete</h6>

        <div class="row g-3">
            <div class="col-md-6">
                <label class="form-label required-field">Asunto</label>
                <input type="text" class="form-control" value="Error en acceso al sistema">
            </div>

            <div class="col-md-3">
                <label class="form-label required-field">Categoría</label>
                <select class="form-select">
                    <option>Red</option>
                    <option>Hardware</option>
                    <option>Software</option>
                </select>
            </div>

            <div class="col-md-3">
                <label class="form-label required-field">Prioridad</label>
                <select class="form-select">
                    <option>Alta</option>
                    <option>Media</option>
                    <option>Baja</option>
                </select>
            </div>

            <div class="col-md-6">
                <label class="form-label">Activo asociado</label>
                <select class="form-select">
                    <option>Sistema principal</option>
                </select>
            </div>

            <div class="col-12">
                <label class="form-label required-field">Descripción</label>
                <textarea class="form-control" rows="4"> Reporte de fallo de acceso al sistema principal. Se genera un error 500.
                </textarea>
            </div>
        </div>
    </div>
</div>

<!--Add advances to the ticket-->

<div class="card mb-4">
    <div class="card-body">
        <h6 class="section-title">Agregar Avance</h6>

        <textarea class="form-control mb-3"
                  rows="3"
                  placeholder="Describa el avance realizado..."></textarea>

        <button class="btn btn-primary-custom text-white">
            <i class="bi bi-plus-circle"></i> Agregar avance
        </button>
    </div>
</div>

<!--History, should probably come from a bitacora table/audit table-->

<div class="card mb-4">
    <div class="card-body">
        <h6 class="section-title">Historial y Avances</h6>

        <ul class="timeline">
            <li>
                <span class="timeline-date">12/03/2025 09:14</span>
                <p><strong>Creado</strong> por Juan Pérez</p>
            </li>
            <li>
                <span class="timeline-date">12/03/2025 10:02</span>
                <p>Asignado a Soporte TI</p>
            </li>
            <li>
                <span class="timeline-date">12/03/2025 14:30</span>
                <p>Diagnóstico inicial completado</p>
            </li>
        </ul>
    </div>
</div>

<!--For added documents-->

<div class="card mb-4">
    <div class="card-body">
        <h6 class="section-title">Documentos Adjuntos</h6>

        <input type="file" class="form-control mb-3" multiple>

        <ul class="list-unstyled">
            <li>
                <i class="bi bi-paperclip"></i>
                diagnostico-red.pdf
            </li>
            <li>
                <i class="bi bi-paperclip"></i>
                foto-equipo.jpg
            </li>
        </ul>
    </div>
</div>

<!--Satisfies the cancel user story-->


<div class="card border-danger">
    <div class="card-body">
        <h6 class="text-danger fw-bold">Zona de Riesgo</h6>

        <p class="text-muted mb-3">
            Cancelar un tiquete es una acción irreversible.
        </p>

        <button class="btn btn-outline-danger"
                data-bs-toggle="modal"
                data-bs-target="#cancelConfirm">
            Cancelar Tiquete
        </button>
    </div>
</div>

<!--Many sections, hard to look good on mobile-->


<div class="d-flex justify-content-end gap-2 mt-4">
    <a asp-area="" asp-controller="Tiquete" asp-action="Index" class="btn btn-outline-secondary">
        Cancelar
    </a>
    <a class="btn btn-primary-custom text-white" id="fakeEditTicket">
        Guardar cambios
    </a>
</div>
@await Html.PartialAsync("_CancelConfirm")